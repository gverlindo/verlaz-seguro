<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="utf-8"/>
    <title>Seguro Internacional Verlaz</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f4f4;
            color: #333;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }
        .container {
            max-width: 900px;
            margin: 30px auto;
            background: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1, h2 {
            text-align: center;
            color: #0056b3;
            margin-bottom: 25px;
        }
        .button-group {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
        }
        .main-button {
            background-color: #007bff;
            color: white;
            padding: 15px 25px;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            flex: 1;
            max-width: 280px;
        }
        .main-button:hover {
            background-color: #0056b3;
        }
        .section {
            display: none;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #f9f9f9;
            margin-top: 20px;
        }
        .section.active {
            display: block;
        }
        
        /* Se√ß√£o de Coberturas na tela inicial */
        .coberturas-inicial {
            margin-top: 40px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }
        .coberturas-inicial h2 {
            color: #004aad;
            margin-bottom: 20px;
        }
        .coberturas-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: #fff;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .coberturas-table th, .coberturas-table td {
            border: 1px solid #ccc;
            padding: 12px;
            vertical-align: top;
            text-align: left;
        }
        .coberturas-table th {
            background: #004aad;
            color: white;
            font-weight: bold;
        }
        .coberturas-table tr:nth-child(even) {
            background: #f2f2f2;
        }
        
        label {
            font-weight: bold;
            display: block;
            margin-bottom: 5px;
            color: #555;
        }
        input, select, textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin-bottom: 15px;
            font-size: 16px;
            box-sizing: border-box;
        }
        button {
            background-color: #28a745;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
            transition: background-color 0.3s ease;
        }
        button:hover {
            background-color: #218838;
        }
        .back-button {
            background-color: #6c757d;
            color: #fff;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            margin: 30px auto;
            display: block;
            font-size: 16px;
            cursor: pointer;
            text-align: center;
            text-decoration: none;
            transition: background-color 0.3s ease;
        }
        .back-button:hover {
            background-color: #5a6268;
        }

        /* Bot√£o Cancelar */
        .cancel-button {
            background-color: #dc3545;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px 5px;
            transition: background-color 0.3s ease;
        }
        .cancel-button:hover {
            background-color: #c82333;
        }

        /* Bot√£o Frete Intelligence */
        .frete-intelligence-btn {
            background-color: #17a2b8;
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            margin-left: 10px;
            transition: background-color 0.3s ease;
        }
        .frete-intelligence-btn:hover {
            background-color: #138496;
        }

        /* Dropdown de pa√≠ses com filtro */
        .country-dropdown {
            position: relative;
            width: 100%;
        }
        .country-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 16px;
            box-sizing: border-box;
        }
        .country-list {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #ccc;
            border-top: none;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }
        .country-item {
            padding: 10px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
        }
        .country-item:hover {
            background-color: #f5f5f5;
        }
        .country-item.restricted {
            color: #dc3545;
            font-weight: bold;
        }

        /* Modal/Pop-up */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 30px;
            border-radius: 10px;
            width: 80%;
            max-width: 500px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }
        .modal h3 {
            color: #dc3545;
            margin-bottom: 20px;
        }
        .modal p {
            margin-bottom: 25px;
            line-height: 1.6;
        }
        .modal button {
            background-color: #007bff;
            padding: 12px 30px;
            font-size: 16px;
        }

        /* Modal Frete Intelligence */
        .frete-modal {
            max-width: 800px;
            width: 90%;
        }
        .frete-form {
            text-align: left;
            margin: 20px 0;
        }
        .frete-form label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .frete-form select, .frete-form input {
            width: 100%;
            padding: 8px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .frete-result {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            display: none;
        }

        /* Tela de Status da Ap√≥lice */
        .status-apolice {
            background-color: #e9ecef;
            border: 2px solid #007bff;
            border-radius: 8px;
            padding: 25px;
            margin-top: 20px;
        }
        .status-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #ccc;
        }
        .status-item:last-child {
            border-bottom: none;
        }
        .status-label {
            font-weight: bold;
            color: #495057;
        }
        .status-value {
            color: #007bff;
            font-weight: bold;
        }
        .status-confirmada {
            color: #28a745;
        }
        .status-rejeitada {
            color: #dc3545;
        }
        .status-andamento {
            color: #ffc107;
        }
        .boleto-section {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 5px;
            padding: 15px;
            margin-top: 15px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Seguro Internacional Verlaz</h1>

        <div class="button-group">
            <button class="main-button" onclick="showSection('cotacao')">Fazer a cota√ß√£o via Verlaz</button>
            <button class="main-button" onclick="showSection('naoFazer')">N√£o fazer seguro</button>
            <button class="main-button" onclick="showSection('jaContratei')">J√° contratei seguro</button>
        </div>

        <!-- Se√ß√£o de Coberturas na tela inicial -->
        <div class="coberturas-inicial" id="coberturasInicial">
            <h2>üõ°Ô∏è Coberturas do Seguro Internacional ‚Äì Verlaz</h2>
            <table class="coberturas-table">
                <thead>
                    <tr>
                        <th>Cobertura (Explica√ß√£o Simples)</th>
                        <th>Percentual Coberto</th>
                        <th>Exemplos (Parcial e Total)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Valor da Mercadoria</strong><br>Prote√ß√£o contra perda ou dano da carga.</td>
                        <td>At√© 100%</td>
                        <td>üß© Parcial: perda de 25% da carga ‚Üí recebe 25% do valor da mercadoria.<br>üì¶ Total: perda completa da carga (sem DI) ‚Üí recebe 100%.</td>
                    </tr>
                    <tr>
                        <td><strong>Frete</strong><br>Reembolso proporcional ao valor da mercadoria avariada.</td>
                        <td>At√© 100%</td>
                        <td>üß© Parcial: perda de 15% da carga ‚Üí recebe 15% do valor do frete.<br>üì¶ Total: carga toda perdida ‚Üí recebe 100% do frete.</td>
                    </tr>
                    <tr>
                        <td><strong>Despesas Operacionais</strong><br>Compensa custos extras com a importa√ß√£o.</td>
                        <td>At√© 10%</td>
                        <td>üß© Parcial: parte da carga vale R$ 15.000 ‚Üí recebe at√© R$ 1.500.<br>üì¶ Total: carga toda perdida ‚Üí recebe at√© 10% do valor total.</td>
                    </tr>
                    <tr>
                        <td><strong>Lucro Estimado</strong><br>Compensa o lucro que voc√™ deixaria de ganhar.</td>
                        <td>At√© 10%</td>
                        <td>üß© Parcial: perdeu R$ 20.000 em mercadoria ‚Üí recebe at√© R$ 2.000.<br>üì¶ Total: perda total ‚Üí at√© 10% do valor total da carga.</td>
                    </tr>
                    <tr>
                        <td><strong>Impostos na Importa√ß√£o</strong><br>Indeniza√ß√£o pelos tributos pagos (com DI registrada).</td>
                        <td>25% sobre valor + frete proporcional</td>
                        <td>üß© Parcial: parte perdida vale R$ 40.000 ‚Üí recebe R$ 10.000.<br>üì¶ Sem DI: valor investido nessa cobertura √© devolvido.</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Se√ß√£o de Cota√ß√£o -->
        <div id="cotacaoSection" class="section">
            <h2>Cota√ß√£o de Seguro</h2>
            
            <label for="nomeCliente">Nome do Cliente</label>
            <input type="text" id="nomeCliente" value="Tech Importadora Ltda." readonly>
            
            <label for="clienteId">Cliente ID na Seguradora</label>
            <input type="text" id="clienteId" value="CLI-998877" readonly>
            
            <label for="paisOrigem">Pa√≠s de Origem da Mercadoria</label>
            <div class="country-dropdown">
                <input type="text" id="paisOrigem" class="country-input" placeholder="Digite para buscar o pa√≠s..." 
                       oninput="filterCountries()" onfocus="showCountryList()" onblur="hideCountryList()">
                <div id="countryList" class="country-list"></div>
            </div>
            
            <label for="numeroPO">N√∫mero da PO</label>
            <input type="text" id="numeroPO" value="PO-98765" readonly>
            
            <h3>NCMs Listadas</h3>
            <div style="background-color: #d1ecf1; border: 1px solid #bee5eb; color: #0c5460; padding: 10px; border-radius: 5px; margin-bottom: 15px;">
                ‚ÑπÔ∏è <strong>NCMs com asterisco (*)</strong> necessitam de an√°lise da seguradora e podem ter a cobertura negada.
            </div>
            
            <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">
                <thead>
                    <tr style="background-color: #007bff; color: white;">
                        <th style="border: 1px solid #ccc; padding: 10px; text-align: left;">C√≥digo e Descri√ß√£o da NCM</th>
                        <th style="border: 1px solid #ccc; padding: 10px; text-align: center;">Permitido Segurar</th>
                        <th style="border: 1px solid #ccc; padding: 10px; text-align: center;">Cotar</th>
                        <th style="border: 1px solid #ccc; padding: 10px; text-align: center;">Valor (USD)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="border: 1px solid #ccc; padding: 10px;">8471.30.12 - Computador port√°til</td>
                        <td style="border: 1px solid #ccc; padding: 10px; text-align: center;">‚úîÔ∏è</td>
                        <td style="border: 1px solid #ccc; padding: 10px; text-align: center;"><input type="checkbox" checked onchange="toggleNCM(this, 19000)"></td>
                        <td style="border: 1px solid #ccc; padding: 10px; text-align: center;">USD 19000</td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #ccc; padding: 10px;">8544.42.00 - Cabos de fibra √≥ptica *</td>
                        <td style="border: 1px solid #ccc; padding: 10px; text-align: center;">‚ö†Ô∏è</td>
                        <td style="border: 1px solid #ccc; padding: 10px; text-align: center;"><input type="checkbox" onchange="toggleNCM(this, 5000)"></td>
                        <td style="border: 1px solid #ccc; padding: 10px; text-align: center;">USD 5000</td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #ccc; padding: 10px;">8528.52.00 - Monitor de v√≠deo</td>
                        <td style="border: 1px solid #ccc; padding: 10px; text-align: center;">‚úîÔ∏è</td>
                        <td style="border: 1px solid #ccc; padding: 10px; text-align: center;"><input type="checkbox" checked onchange="toggleNCM(this, 1000)"></td>
                        <td style="border: 1px solid #ccc; padding: 10px; text-align: center;">USD 1000</td>
                    </tr>
                </tbody>
            </table>
            
            <label for="valorOrdem">Valor da Ordem de Compra (USD)</label>
            <input type="number" id="valorOrdem" value="20000" readonly>
            
            <label for="valorFrete">Valor do Frete Internacional (USD)</label>
            <div style="display: flex; align-items: center;">
                <input type="number" id="valorFrete" value="1700" onchange="atualizarValores()" style="flex: 1; margin-right: 10px;">
                <button class="frete-intelligence-btn" onclick="abrirFreteIntelligence()">Verlaz - Frete Intelligence 1.0</button>
            </div>
            
            <label for="valorTotalUSD">Valor Total a Segurar (USD)</label>
            <input type="number" id="valorTotalUSD" value="21700" readonly>
            
            <label for="valorTotalBRL">Valor Total a Segurar (BRL)</label>
            <input type="number" id="valorTotalBRL" value="118482" readonly>
            
            <button onclick="realizarCotacao()">Cota√ß√£o</button>
            <div id="loading" style="display:none; text-align: center; margin: 20px 0;">‚åõ Fazendo cota√ß√µes com Seguradoras Parceiras...</div>
            
            <div id="resultado" style="display:none; background-color: #d4edda; border: 1px solid #c3e6cb; padding: 20px; border-radius: 5px; margin-top: 20px;">
                <h3>Resultado da Cota√ß√£o</h3>
                <p><strong>Valor do Seguro:</strong> R$ 488,42</p>
                <button onclick="contratarSeguro()" style="background-color: #007bff;">Contratar Agora!</button>
                <button class="cancel-button" onclick="cancelarCotacao()">‚ùå Cancelar Cota√ß√£o</button>
                <div id="msgProcessando" style="display:none; color: #007bff; margin-top: 10px;">Estamos gerando a transa√ß√£o do seu seguro! Aguarde!!!</div>
            </div>
            
            <div id="finalMsg" style="display:none; background-color: #fff3cd; border: 1px solid #ffeaa7; padding: 20px; border-radius: 5px; margin-top: 20px;">
                Sua proposta de seguro est√° em an√°lise e retornaremos em at√© 48 horas √∫teis! Transa√ß√£o Numero VLZ-2025-001234 (Fict√≠cio).
            </div>
            
            <button class="back-button" onclick="resetPage()" id="btnDashboard" style="display:none;">Voltar ao Dashboard Verlaz</button>
        </div>

        <!-- Se√ß√£o N√£o Fazer Seguro -->
        <div id="naoFazerSection" class="section">
            <h2>Voc√™ optou por n√£o fazer o seguro.</h2>
            <p style="text-align: center; font-size: 18px; color: #007bff;"><strong>Valor do Seguro: USD 0.00</strong></p>
            <p style="text-align: center; color: #666; font-style: italic;">Nota: O c√°lculo dos tributos √© feito sobre o valor da mercadoria + frete + despesas + lucro estimado.</p>
            
            <div style="margin-top: 30px;">
                <h2>üõ°Ô∏è Vantagens do Seguro Internacional Verlaz</h2>
                <table class="coberturas-table">
                    <thead>
                        <tr>
                            <th>Cobertura (Explica√ß√£o Simples)</th>
                            <th>Percentual Coberto</th>
                            <th>Exemplos (Parcial e Total)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Valor da Mercadoria</strong><br>Prote√ß√£o contra perda ou dano da carga.</td>
                            <td>At√© 100%</td>
                            <td>üß© Parcial: perda de 25% da carga ‚Üí recebe 25% do valor da mercadoria.<br>üì¶ Total: perda completa da carga (sem DI) ‚Üí recebe 100%.</td>
                        </tr>
                        <tr>
                            <td><strong>Frete</strong><br>Reembolso proporcional ao valor da mercadoria avariada.</td>
                            <td>At√© 100%</td>
                            <td>üß© Parcial: perda de 15% da carga ‚Üí recebe 15% do valor do frete.<br>üì¶ Total: carga toda perdida ‚Üí recebe 100% do frete.</td>
                        </tr>
                        <tr>
                            <td><strong>Despesas Operacionais</strong><br>Compensa custos extras com a importa√ß√£o.</td>
                            <td>At√© 10%</td>
                            <td>üß© Parcial: parte da carga vale R$ 15.000 ‚Üí recebe at√© R$ 1.500.<br>üì¶ Total: carga toda perdida ‚Üí recebe at√© 10% do valor total.</td>
                        </tr>
                        <tr>
                            <td><strong>Lucro Estimado</strong><br>Compensa o lucro que voc√™ deixaria de ganhar.</td>
                            <td>At√© 10%</td>
                            <td>üß© Parcial: perdeu R$ 20.000 em mercadoria ‚Üí recebe at√© R$ 2.000.<br>üì¶ Total: perda total ‚Üí at√© 10% do valor total da carga.</td>
                        </tr>
                        <tr>
                            <td><strong>Impostos na Importa√ß√£o</strong><br>Indeniza√ß√£o pelos tributos pagos (com DI registrada).</td>
                            <td>25% sobre valor + frete proporcional</td>
                            <td>üß© Parcial: parte perdida vale R$ 40.000 ‚Üí recebe R$ 10.000.<br>üì¶ Sem DI: valor investido nessa cobertura √© devolvido.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <button class="back-button" onclick="resetPage()">Concluir e Voltar para Dashboard</button>
        </div>

        <!-- Se√ß√£o J√° Contratei Seguro (SEM status da ap√≥lice) -->
        <div id="jaContrateiSection" class="section">
            <h2>Voc√™ j√° possui seguro.</h2>
            <p style="text-align: center;">Por favor, informe o valor do seguro contratado (em USD) ou marque a op√ß√£o se n√£o deseja informar.</p>
            
            <div style="text-align: center; margin: 30px 0;">
                <label for="valorSeguroContratado">Valor do Seguro Contratado (USD):</label>
                <input type="number" id="valorSeguroContratado" placeholder="0.00" style="width: 200px; display: inline-block;" oninput="checkContratadoInput()">
                
                <div style="margin-top: 15px;">
                    <input type="checkbox" id="naoDesejoInformar" onchange="toggleNaoDesejoInformar()">
                    <label for="naoDesejoInformar" style="display: inline; font-weight: normal;">N√£o desejo informar o valor.</label>
                </div>
            </div>
            
            <button class="back-button" id="btnConcluirContratado" onclick="resetPage()" style="display:none;">Concluir e Voltar para Dashboard</button>
        </div>

        <!-- Se√ß√£o Status da Ap√≥lice (SEPARADA - s√≥ aparece quando cliente fez seguro via sistema) -->
        <div id="statusApoliceSection" class="section">
            <h2>Status da Sua Ap√≥lice</h2>
            
            <div class="status-apolice">
                <div class="status-item">
                    <span class="status-label">N√∫mero da Ap√≥lice:</span>
                    <span class="status-value" id="numeroApolice">VLZ-2025-AP-001234</span>
                </div>
                
                <div class="status-item">
                    <span class="status-label">Status da Ap√≥lice:</span>
                    <span class="status-value status-confirmada" id="statusApolice">Confirmada</span>
                </div>
                
                <div class="status-item">
                    <span class="status-label">Pagamento do Seguro:</span>
                    <span class="status-value" id="statusPagamento">Pago</span>
                </div>
                
                <div class="status-item">
                    <span class="status-label">N√∫mero Transa√ß√£o Verlaz:</span>
                    <span class="status-value" id="numeroTransacao">VLZ-2025-001234</span>
                </div>
                
                <div class="status-item">
                    <span class="status-label">Contato da Seguradora:</span>
                    <span class="status-value" id="contatoSeguradora">AXA Seguros - (11) 3456-7890</span>
                </div>
            </div>

            <!-- Se√ß√£o de Boleto (aparece apenas se autorizado) -->
            <div class="boleto-section" id="boletoSection" style="display:none;">
                <h3>üí≥ Extra√ß√£o de Boleto Banc√°rio</h3>
                <p>Sua ap√≥lice foi autorizada! Clique no bot√£o abaixo para extrair o boleto de pagamento:</p>
                <button onclick="extrairBoleto()" style="background-color: #28a745; font-size: 16px; padding: 15px 30px;">
                    üìÑ Extrair Boleto de Pagamento
                </button>
            </div>

            <!-- Bot√µes de a√ß√£o -->
            <div style="text-align: center; margin-top: 30px;">
                <button id="btnCancelar" onclick="cancelarApolice()" class="cancel-button" style="display:none;">
                    ‚ùå Cancelar Ap√≥lice
                </button>
                <button class="back-button" onclick="resetPage()">Voltar ao Dashboard Verlaz</button>
            </div>
        </div>
    </div>

    <!-- Modal para pa√≠ses restritos -->
    <div id="restrictedCountryModal" class="modal">
        <div class="modal-content">
            <h3>‚ö†Ô∏è Pa√≠s com Restri√ß√£o de Cobertura</h3>
            <p>Lamentamos informar que o pa√≠s selecionado (<strong id="selectedCountryName"></strong>) possui restri√ß√µes em nossa pol√≠tica de seguro internacional.</p>
            <p>Infelizmente, n√£o podemos oferecer cobertura para mercadorias origin√°rias deste pa√≠s no momento.</p>
            <p>Para mais informa√ß√µes sobre pa√≠ses com cobertura dispon√≠vel, entre em contato com nossa equipe comercial.</p>
            <button onclick="closeModal()">Voltar ao Dashboard</button>
        </div>
    </div>

    <!-- Modal para Frete Intelligence -->
    <div id="freteIntelligenceModal" class="modal">
        <div class="modal-content frete-modal">
            <h3>üöö Verlaz - Frete Intelligence 1.0</h3>
            <p>Custos Estimados de Fretes de Importa√ß√£o (Brasil)</p>
            
            <div class="frete-form">
                <label for="freteCountry">Pa√≠s de Origem:</label>
                <select id="freteCountry">
                    <option value="">Selecione o pa√≠s...</option>
                    <option value="china">China</option>
                    <option value="usa">Estados Unidos</option>
                    <option value="germany">Alemanha</option>
                    <option value="japan">Jap√£o</option>
                    <option value="south_korea">Coreia do Sul</option>
                    <option value="italy">It√°lia</option>
                    <option value="france">Fran√ßa</option>
                    <option value="uk">Reino Unido</option>
                    <option value="spain">Espanha</option>
                    <option value="netherlands">Holanda</option>
                    <option value="india">√çndia</option>
                    <option value="mexico">M√©xico</option>
                    <option value="canada">Canad√°</option>
                    <option value="argentina">Argentina</option>
                    <option value="chile">Chile</option>
                </select>

                <label for="freteModality">Modalidade de Transporte:</label>
                <select id="freteModality" onchange="toggleFreteFields()">
                    <option value="">Selecione a modalidade...</option>
                    <option value="aereo">A√©reo</option>
                    <option value="maritimo">Mar√≠timo</option>
                </select>

                <div id="freteAereoFields" style="display: none;">
                    <label for="freteNCM">NCM do Produto:</label>
                    <input type="text" id="freteNCM" placeholder="Ex: 8471.30.12">

                    <label for="freteWeight">Peso Estimado (kg):</label>
                    <input type="number" id="freteWeight" value="100" min="1" step="0.1">
                </div>

                <button onclick="calcularFrete()" style="background-color: #28a745; margin-right: 10px;">
                    üßÆ Calcular Frete
                </button>
                <button onclick="fecharFreteIntelligence()" style="background-color: #6c757d;">
                    ‚ùå Cancelar
                </button>

                <div id="freteLoading" style="display: none; text-align: center; margin: 20px 0;">
                    ‚åõ Consultando Empresas de Frete e Agentes de Cargas Internacionais...
                </div>

                <div id="freteResultado" class="frete-result">
                    <h4>üí∞ Resultado do C√°lculo</h4>
                    <p><strong>Origem:</strong> <span id="freteOrigemResult"></span></p>
                    <p><strong>Destino:</strong> Brasil - S√£o Paulo</p>
                    <p><strong>Modalidade:</strong> <span id="freteModalidadeResult"></span></p>
                    <p><strong>Peso:</strong> <span id="fretePesoResult"></span> kg</p>
                    <div style="background-color: #d4edda; padding: 15px; border-radius: 5px; margin: 15px 0;">
                        <h4>üí∞ Valor do Frete Calculado: USD <span id="freteValorCalculado">0.00</span></h4>
                    </div>
                    <button onclick="importarFreteCalculado()" style="background-color: #28a745; margin-right: 10px;">
                        ‚úÖ Importar Valor para Seguro
                    </button>
                    <button onclick="resetFreteForm()" style="background-color: #6c757d;">
                        üîÑ Nova Consulta
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Lista completa de pa√≠ses
        const allCountries = [
            'AFEGANIST√ÉO', '√ÅFRICA DO SUL', 'ALB√ÇNIA', 'ALEMANHA', 'ANDORRA', 'ANGOLA', 'ANT√çGUA E BARBUDA', 'AR√ÅBIA SAUDITA', 'ARG√âLIA', 'ARGENTINA', 'ARM√äNIA', 'AUSTR√ÅLIA', '√ÅUSTRIA', 'AZERBAIJ√ÉO', 'BAHAMAS', 'BAHREIN', 'BANGLADESH', 'BARBADOS', 'BELARUS', 'B√âLGICA', 'BELIZE', 'BENIN', 'BOL√çVIA', 'B√ìSNIA E HERZEGOVINA', 'BOTSUANA', 'BRASIL', 'BRUNEI', 'BULG√ÅRIA', 'BURKINA FASO', 'BURUNDI', 'BUT√ÉO', 'CABO VERDE', 'CAMAR√ïES', 'CAMBOJA', 'CANAD√Å', 'CATAR', 'CAZAQUIST√ÉO', 'CHADE', 'CHILE', 'CHINA', 'CHIPRE', 'COL√îMBIA', 'COMORES', 'CONGO', 'COREIA DO NORTE', 'COREIA DO SUL', 'COSTA DO MARFIM', 'COSTA RICA', 'CRO√ÅCIA', 'CUBA', 'DINAMARCA', 'DJIBUTI', 'DOMINICA', 'EGITO', 'EL SALVADOR', 'EMIRADOS √ÅRABES UNIDOS', 'EQUADOR', 'ERITREIA', 'ESLOV√ÅQUIA', 'ESLOV√äNIA', 'ESPANHA', 'ESTADOS UNIDOS', 'EST√îNIA', 'ETI√ìPIA', 'FIJI', 'FILIPINAS', 'FINL√ÇNDIA', 'FRAN√áA', 'GAB√ÉO', 'G√ÇMBIA', 'GANA', 'GE√ìRGIA', 'GRANADA', 'GR√âCIA', 'GUATEMALA', 'GUIANA', 'GUIN√â', 'GUIN√â-BISSAU', 'GUIN√â EQUATORIAL', 'HAITI', 'HONDURAS', 'HUNGRIA', 'I√äMEN', 'ILHAS MARSHALL', 'ILHAS SALOM√ÉO', '√çNDIA', 'INDON√âSIA', 'IR√É', 'IRAQUE', 'IRLANDA', 'ISL√ÇNDIA', 'ISRAEL', 'IT√ÅLIA', 'JAMAICA', 'JAP√ÉO', 'JORD√ÇNIA', 'KIRIBATI', 'KUWAIT', 'LAOS', 'LESOTO', 'LET√îNIA', 'L√çBANO', 'LIB√âRIA', 'L√çBIA', 'LIECHTENSTEIN', 'LITU√ÇNIA', 'LUXEMBURGO', 'MACED√îNIA DO NORTE', 'MADAGASCAR', 'MAL√ÅSIA', 'MALAWI', 'MALDIVAS', 'MALI', 'MALTA', 'MARROCOS', 'MAUR√çCIO', 'MAURIT√ÇNIA', 'M√âXICO', 'MIANMAR', 'MICRON√âSIA', 'MO√áAMBIQUE', 'MOLD√ÅVIA', 'M√îNACO', 'MONG√ìLIA', 'MONTENEGRO', 'NAM√çBIA', 'NAURU', 'NEPAL', 'NICAR√ÅGUA', 'N√çGER', 'NIG√âRIA', 'NORUEGA', 'NOVA ZEL√ÇNDIA', 'OM√É', 'PA√çSES BAIXOS', 'PALAU', 'PANAM√Å', 'PAPUA-NOVA GUIN√â', 'PAQUIST√ÉO', 'PARAGUAI', 'PERU', 'POL√îNIA', 'PORTUGAL', 'QU√äNIA', 'QUIRGUIST√ÉO', 'REINO UNIDO', 'REP√öBLICA CENTRO-AFRICANA', 'REP√öBLICA CHECA', 'REP√öBLICA DEMOCR√ÅTICA DO CONGO', 'REP√öBLICA DOMINICANA', 'ROM√äNIA', 'RUANDA', 'R√öSSIA', 'SAMOA', 'SAN MARINO', 'SANTA L√öCIA', 'S√ÉO CRIST√ìV√ÉO E NEVIS', 'S√ÉO TOM√â E PR√çNCIPE', 'S√ÉO VICENTE E GRANADINAS', 'SEICHELES', 'SENEGAL', 'SERRA LEOA', 'S√âRVIA', 'SINGAPURA', 'S√çRIA', 'SOM√ÅLIA', 'SRI LANKA', 'SUAZIL√ÇNDIA', 'SUD√ÉO', 'SUD√ÉO DO SUL', 'SU√âCIA', 'SU√ç√áA', 'SURINAME', 'TAIL√ÇNDIA', 'TAIWAN', 'TAJIQUIST√ÉO', 'TANZ√ÇNIA', 'TIMOR-LESTE', 'TOGO', 'TONGA', 'TRINIDAD E TOBAGO', 'TUN√çSIA', 'TURCOMENIST√ÉO', 'TURQUIA', 'TUVALU', 'UCR√ÇNIA', 'UGANDA', 'URUGUAI', 'UZBEQUIST√ÉO', 'VANUATU', 'VATICANO', 'VENEZUELA', 'VIETN√É', 'Z√ÇMBIA', 'ZIMB√ÅBUE'
        ];

        // Lista de pa√≠ses restritos extra√≠da do PDF da AXA
        const paisesRestritos = [
            'AFEGANIST√ÉO', 'BELARUS', 'BURMA', 'CHINA', 'COREIA DO NORTE', 'CUBA', 'ERITREIA', 'IR√É', 'IRAQUE', 'L√çBANO', 'L√çBIA', 'MIANMAR', 'NICAR√ÅGUA', 'R√öSSIA', 'S√çRIA', 'SOM√ÅLIA', 'SUD√ÉO', 'VENEZUELA', 'I√äMEN', 'ZIMB√ÅBUE'
        ];

        let selectedCountry = '';
        let clienteJaFezSeguro = false; // Simula se o cliente j√° fez seguro VIA SISTEMA
        let freteValorCalculado = 0;

        function showSection(sectionId) {
            // CORRE√á√ÉO: "J√° contratei seguro" N√ÉO vai para status da ap√≥lice
            // Status da ap√≥lice s√≥ aparece se cliente fez seguro VIA SISTEMA
            if (sectionId === 'cotacao' && clienteJaFezSeguro) {
                sectionId = 'statusApolice';
            }

            // Esconder todas as se√ß√µes
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });

            // Controlar visibilidade das coberturas
            const coberturasInicial = document.getElementById('coberturasInicial');
            if (sectionId === 'naoFazer') {
                coberturasInicial.style.display = 'none';
            } else if (sectionId === 'cotacao' || sectionId === 'jaContratei' || sectionId === 'statusApolice') {
                coberturasInicial.style.display = 'none';
            } else {
                coberturasInicial.style.display = 'block';
            }

            // Mostrar a se√ß√£o selecionada
            if (sectionId !== 'inicial') {
                document.getElementById(sectionId + 'Section').classList.add('active');
            }

            // L√≥gica espec√≠fica para cada se√ß√£o
            if (sectionId === 'cotacao') {
                resetFormularioCotacao();
                calcularSomaNCMs();
                atualizarValores();
            } else if (sectionId === 'jaContratei') {
                document.getElementById('valorSeguroContratado').value = '';
                document.getElementById('naoDesejoInformar').checked = false;
                document.getElementById('btnConcluirContratado').style.display = 'none';
            } else if (sectionId === 'statusApolice') {
                configurarStatusApolice();
            }
        }

        function configurarStatusApolice() {
            // Simular diferentes status de ap√≥lice
            const status = Math.random();
            
            if (status < 0.3) {
                // Ap√≥lice em andamento - MOSTRAR bot√£o cancelar
                document.getElementById('numeroApolice').textContent = 'Aguardando emiss√£o';
                document.getElementById('statusApolice').textContent = 'Em andamento';
                document.getElementById('statusApolice').className = 'status-value status-andamento';
                document.getElementById('statusPagamento').textContent = 'N√£o pago';
                document.getElementById('btnCancelar').style.display = 'inline-block'; // CORRE√á√ÉO: Mostrar bot√£o
                document.getElementById('boletoSection').style.display = 'none';
            } else if (status < 0.6) {
                // Ap√≥lice confirmada - N√ÉO mostrar bot√£o cancelar
                document.getElementById('numeroApolice').textContent = 'VLZ-2025-AP-001234';
                document.getElementById('statusApolice').textContent = 'Confirmada';
                document.getElementById('statusApolice').className = 'status-value status-confirmada';
                document.getElementById('statusPagamento').textContent = 'Pago';
                document.getElementById('btnCancelar').style.display = 'none';
                document.getElementById('boletoSection').style.display = 'block';
            } else {
                // Ap√≥lice rejeitada - N√ÉO mostrar bot√£o cancelar
                document.getElementById('numeroApolice').textContent = 'N/A';
                document.getElementById('statusApolice').textContent = 'Rejeitada';
                document.getElementById('statusApolice').className = 'status-value status-rejeitada';
                document.getElementById('statusPagamento').textContent = 'N/A';
                document.getElementById('btnCancelar').style.display = 'none';
                document.getElementById('boletoSection').style.display = 'none';
            }
        }

        function calcularSomaNCMs() {
            let soma = 0;
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            
            checkboxes.forEach((checkbox, index) => {
                if (checkbox.checked) {
                    if (index === 0) soma += 19000; // Computador
                    if (index === 1) soma += 5000;  // Cabos
                    if (index === 2) soma += 1000;  // Monitor
                }
            });
            
            document.getElementById('valorOrdem').value = soma;
            atualizarValores();
        }

        function toggleNCM(checkbox, valor) {
            calcularSomaNCMs();
        }

        function abrirFreteIntelligence() {
            // Pr√©-preencher pa√≠s se j√° selecionado
            const paisOrigem = document.getElementById('paisOrigem').value;
            if (paisOrigem) {
                const countryMap = {
                    'CHINA': 'china',
                    'ESTADOS UNIDOS': 'usa',
                    'ALEMANHA': 'germany',
                    'JAP√ÉO': 'japan',
                    'COREIA DO SUL': 'south_korea'
                };
                const countryValue = countryMap[paisOrigem.toUpperCase()];
                if (countryValue) {
                    document.getElementById('freteCountry').value = countryValue;
                }
            }
            
            document.getElementById('freteIntelligenceModal').style.display = 'block';
        }

        function fecharFreteIntelligence() {
            document.getElementById('freteIntelligenceModal').style.display = 'none';
            resetFreteForm();
        }

        function toggleFreteFields() {
            const modality = document.getElementById('freteModality').value;
            const aereoFields = document.getElementById('freteAereoFields');
            
            if (modality === 'aereo') {
                aereoFields.style.display = 'block';
            } else {
                aereoFields.style.display = 'none';
            }
        }

        function calcularFrete() {
            const country = document.getElementById('freteCountry').value;
            const modality = document.getElementById('freteModality').value;
            
            if (!country || !modality) {
                alert('Por favor, selecione o pa√≠s e a modalidade.');
                return;
            }

            // Mostrar loading
            document.getElementById('freteLoading').style.display = 'block';
            document.getElementById('freteResultado').style.display = 'none';

            // Simular c√°lculo
            setTimeout(() => {
                document.getElementById('freteLoading').style.display = 'none';
                
                // Valores simulados baseados no pa√≠s e modalidade
                const valores = {
                    'china': { 'aereo': 2850, 'maritimo': 1850 },
                    'usa': { 'aereo': 3200, 'maritimo': 2100 },
                    'germany': { 'aereo': 3500, 'maritimo': 2300 },
                    'japan': { 'aereo': 3100, 'maritimo': 2000 },
                    'south_korea': { 'aereo': 2900, 'maritimo': 1900 }
                };

                const valor = valores[country]?.[modality] || 2500;
                freteValorCalculado = valor;

                // Preencher resultado
                const countryNames = {
                    'china': 'China',
                    'usa': 'Estados Unidos',
                    'germany': 'Alemanha',
                    'japan': 'Jap√£o',
                    'south_korea': 'Coreia do Sul'
                };

                document.getElementById('freteOrigemResult').textContent = countryNames[country] || 'Pa√≠s selecionado';
                document.getElementById('freteModalidadeResult').textContent = modality === 'aereo' ? 'A√©reo' : 'Mar√≠timo';
                document.getElementById('fretePesoResult').textContent = document.getElementById('freteWeight').value || '100';
                document.getElementById('freteValorCalculado').textContent = valor.toFixed(2);
                
                document.getElementById('freteResultado').style.display = 'block';
            }, 3000);
        }

        function importarFreteCalculado() {
            document.getElementById('valorFrete').value = freteValorCalculado;
            atualizarValores();
            fecharFreteIntelligence();
            alert('Valor do frete importado com sucesso: USD ' + freteValorCalculado.toFixed(2));
        }

        function resetFreteForm() {
            document.getElementById('freteCountry').value = '';
            document.getElementById('freteModality').value = '';
            document.getElementById('freteNCM').value = '';
            document.getElementById('freteWeight').value = '100';
            document.getElementById('freteAereoFields').style.display = 'none';
            document.getElementById('freteResultado').style.display = 'none';
            document.getElementById('freteLoading').style.display = 'none';
            freteValorCalculado = 0;
        }

        function extrairBoleto() {
            alert('Boleto banc√°rio extra√≠do com sucesso!\n\nValor: R$ 488,42\nVencimento: ' + 
                  new Date(Date.now() + 7*24*60*60*1000).toLocaleDateString('pt-BR') + 
                  '\nC√≥digo de barras: 34191.79001 01234.567890 12345.678901 1 98760000048842');
        }

        function cancelarApolice() {
            if (confirm('Tem certeza que deseja cancelar esta ap√≥lice? Esta a√ß√£o n√£o pode ser desfeita.')) {
                clienteJaFezSeguro = false;
                alert('Ap√≥lice cancelada com sucesso. Voc√™ pode fazer uma nova cota√ß√£o.');
                resetPage();
            }
        }

        // CORRE√á√ÉO: Fun√ß√£o para cancelar cota√ß√£o
        function cancelarCotacao() {
            if (confirm('Tem certeza que deseja cancelar esta cota√ß√£o?')) {
                resetFormularioCotacao();
                alert('Cota√ß√£o cancelada. Voc√™ pode fazer uma nova cota√ß√£o.');
            }
        }

        function filterCountries() {
            const input = document.getElementById('paisOrigem');
            const filter = input.value.toUpperCase();
            const countryList = document.getElementById('countryList');
            
            if (filter.length === 0) {
                countryList.style.display = 'none';
                return;
            }

            const filteredCountries = allCountries.filter(country => 
                country.includes(filter)
            );

            countryList.innerHTML = '';
            filteredCountries.forEach(country => {
                const div = document.createElement('div');
                div.className = 'country-item';
                if (paisesRestritos.includes(country)) {
                    div.className += ' restricted';
                }
                div.textContent = country;
                div.onclick = () => selectCountry(country);
                countryList.appendChild(div);
            });

            countryList.style.display = filteredCountries.length > 0 ? 'block' : 'none';
        }

        function showCountryList() {
            filterCountries();
        }

        function hideCountryList() {
            setTimeout(() => {
                document.getElementById('countryList').style.display = 'none';
            }, 200);
        }

        function selectCountry(country) {
            selectedCountry = country;
            document.getElementById('paisOrigem').value = country;
            document.getElementById('countryList').style.display = 'none';
            
            // Verificar se √© pa√≠s restrito
            if (paisesRestritos.includes(country)) {
                document.getElementById('selectedCountryName').textContent = country;
                document.getElementById('restrictedCountryModal').style.display = 'block';
            }
        }

        function closeModal() {
            document.getElementById('restrictedCountryModal').style.display = 'none';
            resetPage();
        }

        function resetFormularioCotacao() {
            document.getElementById("loading")?.style.setProperty("display", "none");
            document.getElementById("resultado")?.style.setProperty("display", "none");
            document.getElementById("msgProcessando")?.style.setProperty("display", "none");
            document.getElementById("finalMsg")?.style.setProperty("display", "none");
            document.getElementById("btnDashboard")?.style.setProperty("display", "none");
        }

        function atualizarValores() {
            const valorOrdem = parseFloat(document.getElementById('valorOrdem').value) || 0;
            const valorFrete = parseFloat(document.getElementById('valorFrete').value) || 0;
            const valorTotalUSD = valorOrdem + valorFrete;
            const valorTotalBRL = valorTotalUSD * 5.45; // Taxa de c√¢mbio exemplo
            
            document.getElementById('valorTotalUSD').value = valorTotalUSD.toFixed(2);
            document.getElementById('valorTotalBRL').value = valorTotalBRL.toFixed(2);
        }

        function realizarCotacao() {
            document.getElementById("loading").style.display = "block";
            setTimeout(() => {
                document.getElementById("loading").style.display = "none";
                document.getElementById("resultado").style.display = "block";
            }, 3000);
        }

        function contratarSeguro() {
            document.getElementById("msgProcessando").style.display = "block";
            setTimeout(() => {
                document.getElementById("msgProcessando").style.display = "none";
                document.getElementById("resultado").style.display = "none";
                document.getElementById("finalMsg").style.display = "block";
                document.getElementById("btnDashboard").style.display = "block";
                clienteJaFezSeguro = true; // Marcar que cliente fez seguro VIA SISTEMA
            }, 3000);
        }

        function resetPage() {
            // Esconder todas as se√ß√µes
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Mostrar coberturas na tela inicial
            document.getElementById('coberturasInicial').style.display = 'block';
            
            // Reset dos campos
            document.getElementById('valorSeguroContratado').value = '';
            document.getElementById('naoDesejoInformar').checked = false;
            document.getElementById('btnConcluirContratado').style.display = 'none';
            document.getElementById('paisOrigem').value = '';
            selectedCountry = '';
            resetFormularioCotacao();
            calcularSomaNCMs();
            atualizarValores();
        }

        function checkContratadoInput() {
            const valorInput = document.getElementById('valorSeguroContratado');
            const naoDesejoCheckbox = document.getElementById('naoDesejoInformar');
            const btnConcluir = document.getElementById('btnConcluirContratado');

            if (valorInput.value.trim() !== '' || naoDesejoCheckbox.checked) {
                btnConcluir.style.display = 'block';
            } else {
                btnConcluir.style.display = 'none';
            }
        }

        function toggleNaoDesejoInformar() {
            const valorInput = document.getElementById('valorSeguroContratado');
            const naoDesejoCheckbox = document.getElementById('naoDesejoInformar');

            if (naoDesejoCheckbox.checked) {
                valorInput.value = '0.00';
                valorInput.disabled = true;
            } else {
                valorInput.value = '';
                valorInput.disabled = false;
            }
            checkContratadoInput();
        }

        // Inicializar valores na carga da p√°gina
        document.addEventListener('DOMContentLoaded', () => {
            calcularSomaNCMs();
            atualizarValores();
            // Garantir que as coberturas apare√ßam na tela inicial
            document.getElementById('coberturasInicial').style.display = 'block';
        });

        // Fechar modals ao clicar fora deles
        window.onclick = function(event) {
            const restrictedModal = document.getElementById('restrictedCountryModal');
            const freteModal = document.getElementById('freteIntelligenceModal');
            
            if (event.target === restrictedModal) {
                closeModal();
            }
            if (event.target === freteModal) {
                fecharFreteIntelligence();
            }
        }
    </script>
</body>
</html>

